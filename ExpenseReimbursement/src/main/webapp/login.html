<html>

<head>

  <title>Empoyees Reimbursements</title>



  <link rel="stylesheet" type="text/css" href="css/webflow.css">
  <link rel="stylesheet" type="text/css" href="css/my.css">
  <link rel="stylesheet" type="text/css" href="css/main.css">

  <style>
    .input-submit1 {
      width: 400px;
      height: 75px;
      ;
      background-color: #1a1818;
      color: #f8f880;
      padding: 16px 26px;
      margin: 8px 0;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      display: inline-block;
      font-size: 40px;
    }
  </style>

</head>

<body>

  <div id="hero" data-ix="arrow" class="w-section ">
    <div>

      <img src="images/money6.svg" data-ix="bg-stroke-5" class="bg-stroke-2 anmie0"
        style="transition: transform 20000ms ease 0s; transform: translateX(-5px) translateY(35px) rotate(-30deg);">
      <img src="images/number-1.svg" data-ix="bg-stroke-3" class="bg-stroke-8  anmie-0"
        style="transition: transform 20000ms ease 0s; transform: translateX(-13px) translateY(-35px) rotate(30deg);">
      <img src="images/money3.svg" data-ix="bg-stroke-4" class="bg-stroke-9 anmie0"
        style="transition: transform 20000ms ease 0s; transform: translateX(12px) translateY(4px) rotate(-30deg);">
      <img src="images/nine.svg" data-ix="bg-stroke-2" class="bg-stroke-2 anmie2 "
        style="transition: transform 20000ms ease 0s; transform: translateX(-9px) translateY(-27px);">
      <img src="images/one.svg" data-ix="bg-stroke-5" class="bg-stroke-10 anmie1"
        style="transition: transform 20000ms ease 0s; transform: translateX(-5px) translateY(35px) rotate(-30deg);">
      <img src="images/money4.svg" data-ix="bg-stroke-3" class="bg-stroke-3 anmie0"
        style="transition: transform 20000ms ease 0s; transform: translateX(-13px) translateY(-35px) rotate(30deg);">
      <img src="images/money2.svg" data-ix="bg-stroke-4" class="bg-stroke-12 anmie-0"
        style="transition: transform 20000ms ease 0s; transform: translateX(12px) translateY(4px) rotate(-30deg);">
      <img src="images/three.svg" data-ix="bg-stroke-2" class="bg-stroke-5 anmie1"
        style="transition: transform 20000ms ease 0s; transform: translateX(-9px) translateY(-27px);">
      <img src="images/seven.svg" data-ix="bg-stroke-4" class="bg-stroke-5 anmie2"
        style="transition: transform 20000ms ease 0s; transform: translateX(12px) translateY(4px) rotate(-30deg);">
      <img src="images/calculator.svg" data-ix="bg-stroke-5" class="bg-stroke-14 anmie0"
        style="transition: transform 20000ms ease 0s; transform: translateX(-5px) translateY(35px) rotate(-30deg);">
      <img src="images/money6.svg" data-ix="bg-stroke-1" class="bg-stroke-11 anmie-0 "
        style="transition: transform 20000ms ease 0s; transform: translateX(5px) translateY(25px) rotate(-130deg);">
      <img src="images/money3.svg" data-ix="bg-stroke-5" class="bg-stroke-15   anmie-0"
        style="transition: transform 20000ms ease 0s; transform: translateX(-5px) translateY(35px) rotate(-30deg);">
      <img src="images/number-2.svg" data-ix="bg-stroke-3" class="bg-stroke-1 anmie0"
        style="transition: transform 20000ms ease 0s; transform: translateX(-13px) translateY(-35px) rotate(30deg);">
      <img src="images/number-2.svg" data-ix="bg-stroke-3" class="bg-stroke-7 anmie-0"
        style="transition: transform 20000ms ease 0s; transform: translateX(-13px) translateY(-35px) rotate(30deg);">
      <img src="images/money1.svg" data-ix="bg-stroke-1" class="bg-stroke-6 anmie0"
        style="transition: transform 20000ms ease 0s; transform: translateX(5px) translateY(25px) rotate(-130deg);">
      <img src="images/ten.svg" data-ix="bg-stroke-1" class="bg-stroke-10 anmie1"
        style="transition: transform 20000ms ease 0s; transform: translateX(5px) translateY(25px) rotate(-130deg);">
      <img src="images/money2.svg" data-ix="bg-stroke-4" class="bg-stroke-13 anmie0"
        style="transition: transform 20000ms ease 0s; transform: translateX(12px) translateY(4px) rotate(-30deg);">
      <img src="images/money4.svg" data-ix="bg-stroke-1" class="bg-stroke-16 anmie-0"
        style="transition: transform 20000ms ease 0s; transform: translateX(5px) translateY(25px) rotate(-130deg);">
      <img src="images/money1.svg" data-ix="bg-stroke-1" class="bg-stroke-10 anmie0"
        style="transition: transform 20000ms ease 0s; transform: translateX(5px) translateY(25px) rotate(-130deg);">
    </div>
    <img src="images/calculator.svg" class="logo" style=" top:180px">
    <span class="logo" style="margin-top:-30px; padding-block-start: 15px;font-size:30px; 
 
    writing-mode: vertical-lr;
  text-orientation: upright;
    text-transform:uppercase ;text-overflow: ellipsis;">Expenses
      Reimbursement System</span>
    <div class="w-row w-hidden-medium w-hidden-small w-hidden-tiny nav-row">


      <div id="divEmpLogin" class="w-col w-col-6" style="margin:3% 25%;">
        <img src="/ExpenseReimbursement/images/admin1.svg" style="width: 400px; height: 370px;">

        <input id="txtEmpName" type="text" placeholder="Username" class="input-text">
        <input id="txtEmpPass" type="password" placeholder="Password" class="input-text">
        <input id="btnEmplogin" type="button" onclick="doLogin()" value="Login" class="input-submit1">
        <br>
        <span id="spninfo" style="color: crimson; font-size: 20px;"></span>
      </div>



    </div>

    <a href="#hero" class="w-inline-block arrow w--current"><img src="images/arrow.svg" class="arrow-icon"
        style="transition: transform 0.5s ease 0s, transform 500ms ease 0s; transform: rotate(0deg);">
    </a>
  </div>
  <div data-ix="move-nav" class="w-section main-content">

    <div id="work" data-ix="move-nav-work" class="work-section">

    </div>

  </div>




  <script>
    async function doLogin() {
      let txtname = document.getElementById("txtEmpName").value;
      let txtpass = document.getElementById("txtEmpPass").value;
      let spninfo = document.getElementById("spninfo");

      let httpResponse = await fetch("http://localhost:8080/ExpenseReimbursement/ReimbursementServ/login?username=" + txtname + "&password=" + txtpass);
      let body = await httpResponse.text();
      if (httpResponse.ok && body !== "false" ) {
        let jsn = JSON.parse(body);
        alert(jsn.fname);
        let userObjectString = JSON.stringify({ "id": jsn.id, "fname": jsn.fname, "lname": jsn.lname, "email": jsn.email, "dep": jsn.department.name, "isManager": jsn.isManager, "isAdmin": jsn.isAdmin });
        window.sessionStorage.setItem("jsn", userObjectString);
        console.log("JSON.parse " + jsn);
        console.log("Resonse Body " + body);

        window.location.href = "http://localhost:8080/ExpenseReimbursement/Employee.html";
      }

      else {
        spninfo.innerText = "Worng Username or Password ...";

      }

        /*
                let xhr = new XMLHttpRequest();
                let url = "http://localhost:8080/ExpenseReimbursement/Employee.html";
        
                // open a connection 
                xhr.open("POST", url, true);
        
                // Set the request header i.e. which type of content you are sending 
                xhr.setRequestHeader("Content-Type", "application/json");
        
                // Create a state change callback 
                xhr.onreadystatechange = function () {
                  if (xhr.readyState === 4 && xhr.status === 200) {
        
                    // Print received data from server 
                    result.innerHTML = this.responseText;
        
                  }
                };
        
                // Converting JSON data to string 
                var data = JSON.stringify({ "name": name.value, "email": email.value });
        
                // Sending data with the request 
                xhr.send(data);
        */

    }


    function sendJSON() {

      let result = document.querySelector('.result');
      let name = document.querySelector('#name');
      let email = document.querySelector('#email');

      // Creating a XHR object 
      let xhr = new XMLHttpRequest();
      let url = "submit.php";

      // open a connection 
      xhr.open("POST", url, true);

      // Set the request header i.e. which type of content you are sending 
      xhr.setRequestHeader("Content-Type", "application/json");

      // Create a state change callback 
      xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {

          // Print received data from server 
          result.innerHTML = this.responseText;

        }
      };

      // Converting JSON data to string 
      var data = JSON.stringify({ "name": name.value, "email": email.value });

      // Sending data with the request 
      xhr.send(data);
    }


    function Login() {
      let xhttp = new XMLHttpRequest();

      let txtname = document.getElementById("txtEmpName").value;
      let txtpass = document.getElementById("txtEmpPass").value;
      let spninfo = document.getElementById("spninfo");;
      alert(txtname);
      xhttp.onreadystatechange = function () {
        if (this.readyState === 4 && this.status === 200) {
          /*
                        {"ID":0,"department":{"id":1,"name":"Sales","location":"HQ"},"isManager":true,"id":2,
                        "fname":"Adam","lname":"Joseph","dob":"Dec 1, 1988","email":"adam@hotmail.com","isAdmin":false}
                        */
          alert("ready");
          let result = this.responseText;
          //   if (!txtname || 0 === txtname.length || !txtpass || 0 === txtpass.length || 0 === result.length || result === "" || result === "false") {
          // alert("Worng Username or Password ...");
          //  }
          //else {
          /*
        console.log("{DepEmp: " + this.responseText + "}");
        let jsn = JSON.parse(this.responseText);
        alert(jsn);
        console.log(jsn);
        for (var key in jsn) {
          if (jsn.hasOwnProperty(key)) {
            var val = jsn[key];
            console.log(val);
          }
        }
        */

          /* for (let x in jsn) {
             if (jsn[x].userId == uid)

               div1.innerHTML = div1.innerHTML + "<tr><td>" + jsn[x].id + "<td>" + jsn[x].userId + "</td><td>" + jsn[x].title + "</td><td>" + jsn[x].body + "</td></tr>";
           }
           window.location.href = "http://localhost:8080/ExpenseReimbursement/Employee.html?";*/
          //  }


        }


      }
      //  xhttp.open("GET", "http://localhost:8080/ExpenseReimbursement/ReimbursementServ/login?username=" + txtname + "&password=" + txtpass, true);
      xhttp.open("http://localhost:8080/ExpenseReimbursement/ReimbursementServ/login?username=admin&password=123");
      xhttp.send();
      //let httpResponse = await fetch("http://localhost:8080/ExpenseReimbursement/ReimbursementServ/login?username="+txtname+"&password="+txtpass)
      //let result = await httpResponse.text();
      //redirects me to another page



    }

  </script>



  <script>

    // START HERO PARALLAX REGULAR


        // END HERO PARALLAX REGULAR


    /*   var obj = {a: 1, b: 2, c: {a: 1, b: 2}};
function walk(obj) {
 for (var key in obj) {
   if (obj.hasOwnProperty(key)) {
     var val = obj[key];
     console.log(val);
     walk(val);
   }
 }
}
walk(obj);*/
  </script>

</body>

</html>